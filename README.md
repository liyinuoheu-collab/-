这里的文件包含三部分，area_finder文件中可提供目标在图像中所占的像素大小
v38_va为项目主文件，提供目标追踪的识别算法（基于openCV），速度与加速度计算调整（最小可至一帧一计算），同时可将结果导出为txt文件
video_hsv_tuner可以提供针对视频中的标记点hsv数值捕获与标记点参数识别。
主代码中的所有可调整参数具体介绍如下：

# ================ A. 基础与物理参数 =============
# 您要分析的视频文件的完整路径。
video_path = '1.7hz2.mp4'

# 在视频中标定的两个固定点之间的【真实物理距离】，单位是厘米(cm)。
KNOWN_DISTANCE_CM = 1.25

# 程序的“数据采样”频率，即每隔多少帧进行一次图像分析和数据记录。
# - 调小此值：数据点更密集，能捕捉更细节的运动，但计算量更大，处理速度更慢。
# - 调大此值：数据点更稀疏，用于观察宏观运动趋势，处理速度更快。
FRAME_INTERVAL = 1

# 与上面的 FRAME_INTERVAL 完全对应的【真实时间间隔】，单位是秒(s)。
# 这个值至关重要，直接影响速度和加速度的计算准确性。
# 计算方法: TIME_INTERVAL_S = FRAME_INTERVAL / 视频的真实帧率(fps)。
# 例如: 视频是240fps, FRAME_INTERVAL=3, 则此值为 3/240 = 0.0125。
TIME_INTERVAL_S = 0.00416

# 启动程序时，弹出的交互式标定窗口的最大宽度（像素）。
CALIBRATION_WINDOW_WIDTH = 640

# ======== B. 颜色参数 ========

# 您要追踪的所有物体（小球和横杠）的HSV颜色范围。
# 这是所有识别的基础，请务必使用 video_hsv_tuner.py 工具进行精确调试。
lower_orange_color = np.array([0, 87, 19])
upper_orange_color = np.array([15, 255, 255])

# ======== C. 物体特征定义 (智能分类器的“规则手册”) =====

# --- 小球的特征 ---
# 小球的最小像素面积。
# - 如果噪点被误识别为小球，请适当【调高】此值。
# - 如果真实的小球因太小而无法识别，请适当【调低】此值。
min_ball_area = 150

# 小球的最大像素面积。
# - 如果一些面积较大的橙色物体（非横杠）被误识别为小球，请适当【调低】此值。
max_ball_area = 1500

# 小球的最小圆度 (范围 0.0 - 1.0，1.0为完美圆形)。
# - 如果因运动模糊导致小球变形而无法识别，可以适当【调低】此值（例如 0.6）。
# - 如果一些不够圆的噪点被误识别，可以适当【调高】此值（例如 0.8）。
min_ball_circularity = 0.4

# --- 横杠的特征 ---
# 横杠的最小像素面积。
# - 如果横杠无法被识别，请在调试模式下检查其实际面积，并【调低】此值。
min_bar_area = 1500

# 横杠的最小宽高比 (宽度/高度)。这是区分横杠和小球的关键。
# - 如果横杠因不够“扁”而无法识别，请在调试模式下检查其实际AR值，并【调低】此值。
min_bar_aspect_ratio = 5.4

# 横杠允许的最大倾斜角度偏差(度)。
# - 如果您的横杠有些倾斜但无法识别，请在调试模式下检查其实际Ang值，并【调高】此值。
max_bar_angle_deviation = 91.0

# ======= D. 分析与清洗设置 =======

# 【重要】您期望在场景中稳定追踪的小球总数。
# 程序会以首次识别到这个数量的帧为基准，对这些轨迹进行“锁定”，后续只分析它们。
EXPECTED_BALL_COUNT = 5

# 数据清洗的严格程度（单位：标准差）。
# - 调小此值：清洗更“狠”，会剔除更多数据点，曲线更平滑，但可能丢失一些极端情况。
# - 调大此值：清洗更“宽容”，保留更多数据点，更能反映真实波动。
# 2.0 是一个常用的经典值。
OUTLIER_REJECTION_THRESHOLD = 2.0(在时间间隔特别小时不建议使用，）
# --- 【核心】追踪与滤波设置 ---
# 卡尔曼滤波器追踪的最大匹配距离（像素）。
KF_TRACKING_MAX_DISTANCE = 400
# 一个轨迹在连续多少个采样帧没有被匹配上，才被认定为“丢失”并删除。
TRACK_LOST_THRESHOLD = 5
output_folder = 'kalman_analysis_corrected'; PREVIEW_MAX_WIDTH = 512
